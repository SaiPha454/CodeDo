<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeDo - Submission Details</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2025.3.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2025.3.1/core.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/questioner/submission_details.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">CodeDo</div>
            <img src="https://placehold.co/41x41" class="profile-img" alt="Profile"/>
        </header>

        <main class="main-content">
            <div class="breadcrumb">
                <a class="crump-back"
                href="/questioners/dashboard">{{ challenge.title }}</a>
                <span class="separator">/</span>
                <a class="crump-back" href="/questioners/challenges/{{challenge.id}}/participants">Participants</a>
                <span class="separator">/</span>
                <a class="crump-back" href="/questioners/challenges/{{challenge.id}}/participants/{{participant.id}}/submissions">Submissions</a>
                <span class="separator">/</span>
                <span class="current">Submission Details</span>
            </div>

            <div class="submission-card">
                <div class="submission-header">
                    <img src="https://placehold.co/64x64" class="student-img" alt="Student"/>
                    <div>
                        <div class="problem-title">{{ problem.title }}</div>
                        <div class="submission-info">Submitted by {{ participant.username }} (ID: {{ participant.id }}) on {{ submission.submitted_at }}</div>
                    </div>
                    <div class="status-container">
                        <div class="status-badge">{{ submission.status }}</div>
                        <div class="test-count">{{ submission.passed_test_cases }}/{{ submission.total_test_cases }} Test Cases</div>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab active" id="codeTab" mpy-click="activate_code_tab">Code</button>
                    <button class="tab" id="testTab" mpy-click="activate_test_tab">Test Cases</button>
                </div>

                <div class="code-content" id="codeContent">
                    <pre class="code-block">{{ submission.code }}</pre>
                </div>

                <div class="test-cases" id="testContent">
                    <div class="test-grid test-grid-header">
                        <div>Input</div>
                        <div>Expected Output</div>
                        <div>Actual Output</div>
                        <div>Time</div>
                        <div>Status</div>
                        <div>Message</div>
                    </div>
                    {% for result in submission.evaluation_results %}
                    <div class="test-grid test-case">
                        <div>
                            <pre>{{ result.test_case.input }}</pre>
                        </div>
                        <div>
                            <pre>{{ result.test_case.expected_output }}</pre>
                        </div>
                        <div>{{ result.result.output }}</div>
                        <div class="time">{{ result.result.execution_time }} ms</div>
                        <div><span class="test-status {{ result.result.status | lower }}">{{ result.result.status }}</span></div>
                        <div class="test-message">{{ result.result.error or '' }}</div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </main>
        <footer class="footer">
            Copyright Â© 2025 CodeDo Contact US codedo42@gmail.com | Terms & Policy
        </footer>
    </div>
    <script type="mpy" src="/static/pyscripts/questioner/submission_details.py"></script>
</body>
</html>